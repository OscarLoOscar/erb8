{% extends 'base.html' %}
<!-- load base-->
{% load humanize %}
<!-- load humanize-->
{% comment %} {% load static %} {% endcomment %}
<!--load static -->
{% block content %}

  {% comment %} <body> {% endcomment %}
    <section id="showcase-inner" class="py-5 text-white">
      <div class="container">
        <div class="row text-center">
          <div class="col-md-12">
            <h1 class="display-4">User Dashboard</h1>
            <p class="lead">Manage your BC Health Care account</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Breadcrumb --> 
    <section id="bc" class="mt-3">
      <div class="container">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              {% comment %} a-link is MVT - view {% endcomment %}
              <a href="{% url 'pages:index'%}"> 
                <i class="fas fa-home"></i> Home</a>
            </li>
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </nav>
      </div>
    </section>

    <!-- Listing 1 -->
    {% comment %} {% if accounts %} {% endcomment %}
    <!-- for loop accounts -->
    {% comment %} {% for account in accounts %} {% endcomment %}
    {% include 'partials/_alert.html' %}
    <section id="dashboard" class="py-4">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            {% comment %} <h2>Welcome {{ account.name  | title }}</h2> {% endcomment %}
            <h2>Welcome {{ user.username  | title }}</h2>
            <!-- add for-loop @ 6/1/2026-->
            {% if contacts%}
            <p>Here are the clinic listings that you have inquired about</p>
            <table class="table"> <!-- table : must have head，body -->
              <thead>
                <tr>
                  <th scope="col">Clinic ID</th>
                  <th scope="col">Clinic</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                {% comment %} for loop listing  {% endcomment %}
                {% for contact in contacts %}
                <tr>
                  <td>{{contact.listing_id}}</td>
                  <td>{{ contact.listing | title}}</td>
                  <td>
                    <a class="btn btn-light" href="{% url 'listings:listing' contact.listing_id %}">View Listing</a>
                    <button class="btn btn-danger" 
                    data-url="{% url 'contacts:delete_contact' contact.id %}"
                    {% comment %} delete完要confirm {% endcomment %}
                    data-toggle="modal" 
                    {% comment %} data-toggle = On/Off function {% endcomment %}
                    data-target="#deleteConfirmModal"
                    data-id="{{contact.id}}"
                    {% comment %} data-id 既contact.id入份去data-url {% endcomment %}
                    >Delete Listing</button>
                    <a href ="{% url 'contacts:edit_contact' contact.id%}" 
                    class="btn btn-success"
                    >Edit Message</a>
                    {% comment %} 用Django form黎做edit_contact {% endcomment %}
                    
                  </td>
                  {% comment %} data:create一個data value, internal variable,帶住value去番backend {% endcomment %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
            {% else %}
            <p>You have not made any inquiries yet.</p>
            {% endif %}
          </div>
        </div>
      </div>
    </section>
    <!-- Delete Modal -->
    <!-- define dialog box-->
      <div
      class="modal fade"
      id="deleteConfirmModal"
      role="dialog">
      <!-- 畫線 -->
        <div class="modal-dialog">
          <!-- define area -->
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" 
              id="deleteModalLabel"
              >Confirm DELETE</h5>
              <!-- 出個交叉-->
              <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          <div class="modal-body">
            <p>Are you sure you want to delete this inquiry?</p>
            {% comment %} if onClick Yes , will show a box to show confirmDeleteBtn {% endcomment %}
            {% comment %} then Yes will back to data-url {% endcomment %}
            <a href="" class="btn btn-danger" id="confirmDeleteBtn">Yes</a>
            {% comment %} 呢度href 係冇野，因為要靠data-url 去放條URL入黎 {% endcomment %}
            <button class="btn btn-info" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    {% endblock content%}
    {% comment %} {% endfor %}{% endif %} {% endcomment %}
  {% comment %} </body> {% endcomment %}